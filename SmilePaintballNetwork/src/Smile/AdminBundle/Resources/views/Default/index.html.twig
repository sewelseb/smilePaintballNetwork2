{% extends "SmilePlatformBundle::Default/layout.html.twig" %}
{% block pageHeader %}
    <h1 class="page-header">
        Admin of Smile Paintball Network
    </h1>
{% endblock %}
{% block leftCollumn %}
    {% javascripts

    '@SmilePlatformBundle/public/js/Angular/Controllers/adminStatsCtrl.js' filter='cssrewrite'



    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
    <div class="row">
        <div class="col-md-5">
            <div ng-controller="adminStatsCtrl">
                <span id="getStatsApiUrl" hidden>{{ path('smile_api_admin_getstats') }}</span>
                <H2>Statistics:</H2>
                {% verbatim %}
                <strong>Number of users: {{ numberOfUsers }}</strong><br/>
                <strong>Number of posts: {{ numberOfPosts}}</strong><br/>
                <strong>Number of upvotes: {{ numberOfUpvotes }}</strong><br/>
                <strong>Number of downvotes: {{ numberOfDownvotes }}</strong><br/>
                <strong>Number of Comments: {{ numberOfComments }}</strong><br/>
            {% endverbatim %}
            </div>
        </div>
        <div class="col-md-5">
            <section id="auth-button"></section>
            <section id="view-selector"></section>
            <section id="timeline"></section>
        </div>
    </div>

    <hr>



    <script>
        (function(w,d,s,g,js,fjs){
            g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(cb){this.q.push(cb)}};
            js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];
            js.src='https://apis.google.com/js/platform.js';
            fjs.parentNode.insertBefore(js,fjs);js.onload=function(){g.load('analytics')};
        }(window,document,'script'));
    </script>

    <script>
        // Replace with your view ID.

        var VIEW_ID = '104931471';
        var secret = 'XPkxHZwGjLXDfowR8V_IokGY';


        // Replace with your view ID.


        var CLIENT_ID = '469652032975-n6p9uq8411l3jphbnup0njd48hft7pgq.apps.googleusercontent.com';

        gapi.analytics.ready(function() {

            // Step 3: Authorize the user.

            var CLIENT_ID = '469652032975-n6p9uq8411l3jphbnup0njd48hft7pgq.apps.googleusercontent.com';

            gapi.analytics.auth.authorize({
                container: 'auth-button',
                clientid: CLIENT_ID,
            });

            // Step 4: Create the view selector.

            var viewSelector = new gapi.analytics.ViewSelector({
                container: 'view-selector'
            });

            // Step 5: Create the timeline chart.

            var timeline = new gapi.analytics.googleCharts.DataChart({
                reportType: 'ga',
                query: {
                    'dimensions': 'ga:date',
                    'metrics': 'ga:sessions',
                    'start-date': '30daysAgo',
                    'end-date': 'yesterday',
                },
                chart: {
                    type: 'LINE',
                    container: 'timeline'
                }
            });

            // Step 6: Hook up the components to work together.

            gapi.analytics.auth.on('success', function(response) {
                viewSelector.execute();
            });

            viewSelector.on('change', function(ids) {
                var newIds = {
                    query: {
                        ids: ids
                    }
                }
                timeline.set(newIds).execute();
            });
        });

    </script>

    <!-- Load the JavaScript API client and Sign-in library. -->
    <script src="https://apis.google.com/js/client:platform.js"></script>
{% endblock %}

{% block rightCollumn %}

{% endblock %}